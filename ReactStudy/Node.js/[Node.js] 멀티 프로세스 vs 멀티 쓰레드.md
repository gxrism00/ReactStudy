# 멀티 프로세스 vs 멀티 스레드

## 프로세스

- 메모리에 적재되고 CPU 자원을 할당받아 프로그램이 실행되고 있는 상태
- 프로세스는 Code, Data, Stack, Heap 영역의 네가지 구조
- 원칙적으로 서로 다른 프로세스간의 메모리 공간 접근은 허용되지 않음  
(만약 프로세스간 서로 다른 자원에 접근하려면 프로세스간의 통신을 해야 함)
- 출처의 그림 참고하면 이해하기 편함

## 스레드

- 스레드는 어떠한 프로그램 내에서, 특히 프로세스 내에서 실행되는 흐름의 단위
- 하나의 프로세스는 반드시 하나 이상의 스레드를 갖음
- 프로세스 내에서 각각 Stack만 따로 할당받고 Code, Data, Heap 영역은 공유
- 출처의 그림 참고하면 이해하기 편함

## 결론

> `프로세스`는 자원을 공유하지 않지만, `스레드`는 자원을 공유한다.

<br/>

## 멀티 프로세스

- 하나의 애플리케이션을 여러 개의 프로세스로 구성하여 각 프로세스가 하나의 작업을 처리하도록 하는 것
- 다음과 같은 특징이 있음
  - 안정성이 좋음. 여러개의 자식 프로세스 중 하나의 문제가 발생해도, 다른 자식 프로세스에 영향이 확산되지 않음
  - 구현이 비교적 간단하고, 각 프로세스들이 독립적으로 동작하며 자원이 서로 다르게 할당
  - 프로세스 간 통신을 하기 위해서는 IPC를 통해야 함
  - 메모리 사용량이 많음
  - 스케쥴링에 따른 Context Switch가 많아지고, 성능 저하의 우려가 있음

## 멀티 스레드

- 하나의 애플리케이션을 여러 개의 스레드로 구성하여 하나의 스레드가 하나의 작업을 처리하도록 하는 것
- 일반적으로, 단일 스레드로 Network 또는 DB 와 같은 긴 작업을 수행하는 경우 해당 작업을 처리하는 동안 사용자와 상호작용이 불능인 상태가 될 수 있음
- 다음과 같은 특징이 있음
  - 응답성이 좋다. 자식 스레드가 오류 또는 긴 작업으로 인해 중단되어도 프로그램이 지속 됨
  - 자원 공유가 쉽다. 스레드들은 부모 프로세스의 자원과 메모리를 공유
  - 프로세스를 할당하는 것보다 스레드를 할당하는 것이 비용이 적음
  - 멀티프로세서 구조에서 각각의 스레드가 다른 프로세서에서 병렬로 수행
  - 구현 및 테스트, 디버깅이 어려움
  - 너무 많은 스레드 사용은 오버헤드를 발생시킴
  - 동기화 그리고 교착상태가 발생하지 않도록 주의 요함
  - 자식 스레디 중 하나에 문제가 생긴경우 전체 프로세스에 영향을 줌

## 멀티 프로세스 vs 멀티 스레드

|종류|장점|단점|
|----|----|----|
|`멀티 프로세스`|하나의 프로세스가 죽어도 다른 프로세스에게는 영향을 끼치지 않음|각각 독립된 메모리 영역을 갖고 있어 작업량이 많을 수록 오버헤드가 발생하고 Context SwitchingVisit Website으로 인한 성능 저하를 유발
|`멀티 스레드`|프로세스의 응답시간이 단축되고 시스템의 처리율이 향상, 또한 코드영역과 데이터 영역을 공유하기 떄문에 자원 소모가 적음|프로그램 디버깅이 어렵고 하나의 스레드에 문제가 생기면 전체적인 프로세스에 영향을 끼치게 됨

### 멀티 프로세스 -> 멀티 스레드 장점

- 자원을 할당하는 비용을 줄임
- 스레드 간 데이터를 주고 받는 것이 간단해짐(IPC 안써도 됨) -> 통신 비용 적음
- 시스템 자원 소모가 적음

### 멀티 프로세스 -> 멀티 스레드 단점

- 안정성 문제 -> 하나의 스레드가 자신이 사용하던 데이터 공간을 망가뜨린다면, 해당 데이터 공간을 공유하는 모든 스레드가 망가짐

[출처]
https://inpa.tistory.com/entry/%F0%9F%91%A9%E2%80%8D%F0%9F%92%BB-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4-%E2%9A%94%EF%B8%8F-%EC%93%B0%EB%A0%88%EB%93%9C-%EC%B0%A8%EC%9D%B4